<% include ../head.ejs %>

<div class="container">
    <form action="/knowledge/save" method="post">
        <input type="hidden" name="username" value="<%- locals.signedInUser.username %>" required readonly>
        <% if(typeof doc != 'undefined' ){ %>
        <input type="hidden" name="id" value="<%- doc.id %>" required readonly>
        <% } else {
            doc = {};
        } %>
        <div class="form-group">
            <label for="title">Title</label>
            <input name="title" type="text" placeholder="Title" value="<%- doc.title %>" required>
        </div>
        <label for="editor">Content</label>
        <div class="row">
            <div class="col6">
                <div class="form-group">
                    <textarea class="editor" id="editor" name="editor" placeholder="# New Document"><%- doc.body %></textarea>
                </div>
            </div>
            <div class="col6">
                <div id="preview"></div>
            </div>
        </div>


        <div class="form-group pull-right">
            <a href="/knowledge/<%- doc.id %>" class="button primary">Back</a>
            <input type="submit" class="success" value="Save">
        </div>
    </form>
</div>

<script src="/js/markdown_stuff.js"></script>

<% include ../foot.ejs %>